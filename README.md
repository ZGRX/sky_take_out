# 苍穹外卖系统

这是一个基于黑马程序员苍穹外卖项目的改进版，采用前后端完全分离架构，使用现代化技术栈开发的外卖管理系统。

## 项目简介

本项目基于黑马程序员的苍穹外卖教学项目，进行了以下改进：
- ✅ **前端独立仓库**: `sky-frontend/` 目录，完全独立的前端项目
- ✅ **Vue 3 重构**: 使用 Vue 3 Composition API + Vite 构建
- ✅ **Element Plus**: 替换原 Element UI，UI 更现代化
- ✅ **开发体验优化**: Vite 热更新、快速启动

## 技术栈

### 后端
- **Spring Boot 2.7.3** - 核心框架
- **MyBatis** - 持久层框架
- **MySQL** - 数据库
- **Druid** - 数据库连接池
- **JWT (jjwt 0.9.1)** - 用户认证
- **Lombok 1.18.36** - 简化代码（JDK 17 兼容）
- **Swagger 2.9.2** - API文档
- **JAXB API 2.3.1** - JWT 依赖（JDK 11+ 必需）

### 前端
- **Vue 3.3.4** - 渐进式框架
- **Vite 5.0.0** - 新一代构建工具
- **Element Plus** - 组件库
- **Vue Router 4** - 路由管理
- **Axios 1.4.0** - HTTP 客户端

## 功能模块

### ✅ 已实现功能

#### 管理端功能
1. **员工管理**
   - ✅ 员工登录/退出 (JWT 认证)
   - ✅ 默认账号：admin / 123456

2. **菜品管理**
   - ✅ 菜品列表查询
   - ✅ 菜品新增
   - ✅ 菜品编辑
   - ✅ 菜品删除
   - ✅ 菜品搜索
   - ✅ 价格自动转换（元/分）
   - ✅ 状态管理（启售/停售）

3. **订单管理**
   - ✅ 查看所有订单
   - ✅ 接单操作
   - ✅ 拒单操作
   - ✅ 完成订单
   - ✅ 订单状态显示

4. **界面优化**
   - ✅ 侧边栏导航
   - ✅ 顶部用户信息栏
   - ✅ 渐变登录页
   - ✅ 响应式布局
   - ✅ 表格展示优化

---

### ❌ 未实现功能（待开发）

#### 管理端前端界面
1. **员工管理模块**
   - [ ] 员工列表查询界面
   - [ ] 员工新增对话框
   - [ ] 员工编辑功能
   - [ ] 员工删除确认
   - [ ] 员工账号启用/禁用开关

2. **分类管理模块**
   - [ ] 分类列表展示页面
   - [ ] 分类新增表单
   - [ ] 分类编辑弹窗
   - [ ] 分类删除操作
   - [ ] 分类排序拖拽
   - [ ] 分类启用/停用切换

3. **套餐管理模块**
   - [ ] 套餐列表页面
   - [ ] 套餐新增（包含菜品选择）
   - [ ] 套餐编辑功能
   - [ ] 套餐删除确认
   - [ ] 套餐起售/停售状态

4. **数据统计模块**
   - [ ] 营业额统计图表（ECharts）
   - [ ] 用户统计报表
   - [ ] 订单统计分析
   - [ ] 销量排行 Top10
   - [ ] 数据导出功能（Excel）

#### 用户端（C端小程序/H5）
1. **用户界面（完整前端）**
   - [ ] 首页展示（轮播图、分类、推荐）
   - [ ] 菜品列表页面
   - [ ] 菜品详情页
   - [ ] 购物车页面
   - [ ] 订单确认页
   - [ ] 订单列表页
   - [ ] 订单详情页
   - [ ] 个人中心页

2. **地址管理**
   - [ ] 地址列表页面
   - [ ] 新增地址表单
   - [ ] 编辑地址功能
   - [ ] 删除地址确认
   - [ ] 设置默认地址

3. **订单功能增强**
   - [ ] 订单详情查看
   - [ ] 订单取消功能
   - [ ] 订单评价系统
   - [ ] 再来一单快捷操作

4. **用户功能**
   - [ ] 手机号登录界面
   - [ ] 用户信息管理
   - [ ] 历史订单查询
   - [ ] 收藏菜品功能

#### 后端功能（如需扩展）
1. **高级功能**
   - [ ] Redis 缓存
   - [ ] 消息队列（订单异步处理）
   - [ ] 定时任务（自动取消超时订单）
   - [ ] 文件上传（菜品图片）
   - [ ] WebSocket（订单实时推送）

2. **优化功能**
   - [ ] 接口限流
   - [ ] 日志监控
   - [ ] 接口文档完善
   - [ ] 单元测试

---

## 快速开始

### 环境要求
- **JDK 17** (已配置)
- **Maven 3.6+**
- **MySQL 5.7+**
- **Node.js 16+** (前端需要)
- **IntelliJ IDEA** 或其他 Java IDE

### 1. 数据库初始化

```bash
mysql -u root -p < database/sky_take_out.sql
```

### 2. 后端启动

#### 修改配置
编辑 `sky-server/src/main/resources/application-dev.yml`：

```yaml
spring:
  datasource:
    druid:
      username: root        # 修改为你的数据库用户名
      password: 123456      # 修改为你的数据库密码
```

#### 构建并运行
```bash
mvn clean package -DskipTests
```

在 IntelliJ IDEA 中运行 `SkyApplication.java`

后端地址: http://localhost:8080

### 3. 前端启动

```bash
cd sky-frontend
npm install
npm run dev
```

前端地址: **http://localhost:5173**

登录账号: `admin` / `123456`

---

## 常见问题

### 1. Lombok 编译错误
已升级到 Lombok 1.18.36，兼容 JDK 17+

**解决**: IntelliJ → `File` → `Invalidate Caches...` → 重启

### 2. JWT 错误
已添加 JAXB API 2.3.1 依赖

### 3. 前端连接失败
点击 "🔍 测试后端连接" 按钮诊断

---

## API 接口

### 员工登录
```http
POST /admin/employee/login
{"username": "admin", "password": "123456"}
```

### 菜品管理
```http
GET  /admin/dish/list          # 查询列表
POST /admin/dish               # 新增
PUT  /admin/dish               # 编辑
DELETE /admin/dish/{id}        # 删除
```

### 订单管理
```http
GET /admin/order/list          # 查询订单
PUT /admin/order/confirm/{id}  # 接单
PUT /admin/order/rejection/{id} # 拒单
PUT /admin/order/complete/{id}  # 完成
```

---

## 致谢

感谢黑马程序员提供的苍穹外卖项目教学资源
